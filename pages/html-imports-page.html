<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../layouts/scaffold-layout.html">
<link rel="import" href="../elements/code-block.html">
<link rel="import" href="../elements/code-snippet.html">

<polymer-element name="html-imports-page" noscript>
  <template>
    <scaffold-layout selected="htmlimports">
      <div class="title">HTML Imports & Relative Paths</div>

      <p>HTML Imports treat relative paths in a special way. Say the current URL is <code-snippet>/dir/home</code-snippet>.</p>
<code-block>&lt;html&gt;
  &lt;head&gt;
    &lt;link rel="import" href="/bower_components/app-router/app-router.html"&gt;
    &lt;link rel="import" href="/elements/my-custom-el.html"&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;a href="api"&gt;This will link to /dir/api&lt;/a&gt;
    &lt;my-custom-el&gt;&lt;/my-custom-el&gt;
  &lt;/body&gt;
&lt;/html&gt;</code-block>

      <p>Note how relative paths are relative to the current directory <code-snippet>/dir/</code-snippet>. This is how relative paths normally work. This isn't the case for relative paths inside imported documents (ex: <code-snippet>/elements/my-custom-el.html</code-snippet>).</p>
<code-block>&lt;!-- a link to /elements/my-other-el.html --&gt;
&lt;link rel="import" href="my-other-el.html"&gt;

&lt;!-- a link to /elements/my-custom-el.js --&gt;
&lt;script src="my-custom-el.js"&gt;&lt;/script&gt;

&lt;polymer-element name="my-custom-el" noscript&gt;
  &lt;template&gt;
    &lt;h2&gt;I'm an imported document from the /elements/ directory&lt;/h2&gt;
    &lt;a href="api"&gt;This will link to /elements/api not /dir/api&lt;/a&gt;
    &lt;a href="#api"&gt;This will link to /elements/my-custom-el.html#api not /dir/home#api&lt;/a&gt;
    &lt;a href="/api"&gt;Absolute paths still work normally, this will link to /api&lt;/a&gt;
    &lt;a href="/#/api"&gt;This is how you set an absolute hash path to /#/api&lt;/a&gt;
  &lt;/template&gt;
&lt;/polymer-element&gt;</code-block>

      <p>There is a good reason why relative paths work this way. This allows the custom element to load it's dependencies relative to it's current location. For example, if</p>
      <code-block>/bower_components/app-router/app-router.html</code-block>

      <p>depends on</p>
      <code-block>/bower_components/app-router/app-router.js</code-block>

      <p>it can load it with</p>
      <code-block>&lt;script src="app-router.js"&gt;&lt;/script&gt;</code-block>

      <p>It doesn't matter where you put the <code-snippet>app-router</code-snippet> folder. It doesn't need to be in <code-snippet>/bower-components/</code-snippet> since it's dependencies are loaded relative to <code-snippet>app-router.html</code-snippet> and not relative to the current URL's directory <code-snippet>/dir/</code-snippet>.</p>

      <p>The odd thing here is that relative hash anchor tags <code-snippet>&lt;a href="#api"&gt;&lt;/a&gt;</code-snippet> also are relative to the imported document. This means <code-snippet>&lt;a href="#api"&gt;&lt;/a&gt;</code-snippet> will point to <code-snippet>/elements/my-custom-el.html#api</code-snippet> when it's inside <code-snippet>/elements/my-custom-el.html</code-snippet>. This isn't expected since it will make the browser load and try to display <code-snippet>/elements/my-custom-el.html</code-snippet>. This won't display anything since a custom element doesn't display anything by itself. You need to include the custom elment on a page. I'm not sure if this is a bug or the intended way HTML Imports are supposed to handle this.</p>

    </scaffold-layout>
  </template>
</polymer-element>
